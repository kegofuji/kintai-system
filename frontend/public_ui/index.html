<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="勤怠管理システム - SES営業向けポートフォリオ">
    <meta name="author" content="勤怠管理システム開発チーム">
    <title>勤怠管理システム</title>
    
    <!-- CSS読み込み（レスポンシブ対応） -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- PWA対応用メタタグ -->
    <meta name="theme-color" content="#0066cc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="勤怠管理">
    
    <!-- ファビコン -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <!-- ローディング画面 -->
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>読み込み中...</p>
    </div>

    <!-- メッセージ表示エリア -->
    <div id="message-container" class="message-container"></div>

    <!-- ログイン画面（レイアウト） -->
    <div id="login-screen" class="screen login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>勤怠管理システム</h1>
                <p>SES営業向けポートフォリオシステム</p>
            </div>
            
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="employee-code">社員ID</label>
                    <input type="text" 
                           id="employee-code" 
                           name="employeeCode" 
                           placeholder="社員IDを入力"
                           maxlength="10"
                           required
                           autocomplete="username">
                    <div class="error-message" id="employee-code-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="password">パスワード</label>
                    <input type="password" 
                           id="password" 
                           name="password" 
                           placeholder="パスワードを入力"
                           maxlength="20"
                           required
                           autocomplete="current-password">
                    <div class="error-message" id="password-error"></div>
                </div>
                
                <button type="submit" class="btn btn-primary btn-login">
                    ログイン
                </button>
            </form>
            
            <!-- テスト用アカウント情報 -->
            <div class="test-accounts">
                <h3>テスト用アカウント</h3>
                <div class="account-info">
                    <strong>管理者:</strong> ADMIN001 / AdminPass123!
                </div>
                <div class="account-info">
                    <strong>社員:</strong> E001 / TestPass123!
                </div>
            </div>
        </div>
    </div>

    <!-- 社員ダッシュボード（画面構成） -->
    <div id="employee-dashboard" class="screen dashboard-screen" style="display: none;">
        <!-- ヘッダーナビゲーション -->
        <nav class="navbar">
            <div class="navbar-brand">
                <h2>勤怠管理システム</h2>
            </div>
            <div class="navbar-menu">
                <a href="#" data-nav="attendance-history">勤怠履歴</a>
                <a href="#" data-nav="leave-request">有給申請</a>
                <a href="#" data-nav="adjustment-request">打刻修正</a>
                <a href="#" id="logout-btn">ログアウト</a>
            </div>
            <div class="navbar-user">
                <span id="user-name"></span>
                <span id="session-timer" class="session-timer"></span>
            </div>
        </nav>

        <!-- メインコンテンツエリア -->
        <main class="main-content">
            <!-- 出退勤打刻エリア（配置） -->
            <section class="clock-section">
                <div class="clock-container">
                    <div class="clock-buttons">
                        <button id="clock-in-btn" class="btn btn-success btn-clock">
                            出勤
                        </button>
                        <button id="clock-out-btn" class="btn btn-danger btn-clock">
                            退勤
                        </button>
                    </div>
                    
                    <!-- 当日の打刻状況表示 -->
                    <div class="clock-status" id="today-status">
                        <h3>本日の勤務状況</h3>
                        <div class="status-info">
                            <div class="status-item">
                                <span class="status-label">出勤時刻:</span>
                                <span id="today-clock-in">--:--</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">退勤時刻:</span>
                                <span id="today-clock-out">--:--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 動的コンテンツエリア -->
            <section id="dynamic-content" class="content-area">
                <!-- JavaScriptによって動的に内容が変更される -->
            </section>
        </main>
    </div>

    <!-- 管理者ダッシュボード（画面構成） -->
    <div id="admin-dashboard" class="screen dashboard-screen" style="display: none;">
        <!-- ヘッダーナビゲーション -->
        <nav class="navbar admin-navbar">
            <div class="navbar-brand">
                <h2>勤怠管理システム（管理者）</h2>
            </div>
            <div class="navbar-menu admin-menu">
                <a href="#" data-nav="employee-management">社員管理</a>
                <a href="#" data-nav="attendance-management">勤怠管理</a>
                <a href="#" data-nav="request-approval">申請承認</a>
                <a href="#" data-nav="leave-management">有給管理</a>
                <a href="#" data-nav="report-generation">レポート出力</a>
                <a href="#" id="admin-logout-btn">ログアウト</a>
            </div>
            <div class="navbar-user">
                <span id="admin-user-name"></span>
                <span id="admin-session-timer" class="session-timer"></span>
            </div>
        </nav>

        <!-- メインコンテンツエリア -->
        <main class="main-content">
            <section id="admin-content" class="content-area">
                <!-- 管理者向けメイン画面 -->
                <div class="admin-dashboard-home">
                    <h2>管理者ダッシュボード</h2>
                    
                    <div class="admin-menu-grid">
                        <div class="menu-card" data-nav="employee-management">
                            <h3>社員管理</h3>
                            <p>社員の追加・編集・退職処理</p>
                        </div>
                        
                        <div class="menu-card" data-nav="attendance-management">
                            <h3>勤怠管理</h3>
                            <p>全社員の勤怠データ検索・編集</p>
                        </div>
                        
                        <div class="menu-card" data-nav="request-approval">
                            <h3>申請承認</h3>
                            <p>有給・打刻修正・月末申請の承認</p>
                        </div>
                        
                        <div class="menu-card" data-nav="leave-management">
                            <h3>有給管理</h3>
                            <p>有給承認・付与調整</p>
                        </div>
                        
                        <div class="menu-card" data-nav="report-generation">
                            <h3>レポート出力</h3>
                            <p>月次レポートPDF出力</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- モーダルダイアログ -->
    <div id="modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">確認</h3>
                <button class="modal-close" id="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modal-message">処理を実行してもよろしいですか？</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-cancel-btn">キャンセル</button>
                <button class="btn btn-primary" id="modal-confirm-btn">OK</button>
            </div>
        </div>
    </div>

    <!-- JavaScript読み込み（Vanilla JS SPA構成） -->
    <script src="js/constants/config.js"></script>
    <script src="js/utils/dateUtil.js"></script>
    <script src="js/utils/formatter.js"></script>
    <script src="js/utils/validator.js"></script>
    <script src="js/utils/router.js"></script>
    
    <script src="js/services/authService.js"></script>
    <script src="js/services/attendanceService.js"></script>
    <script src="js/services/requestService.js"></script>
    <script src="js/services/adminService.js"></script>
    
    <script src="js/components/dashboard.js"></script>
    <script src="js/components/attendance.js"></script>
    <script src="js/components/leaveRequest.js"></script>
    <script src="js/components/admin.js"></script>
    
    <script src="js/app.js"></script>

    <!-- サービスワーカー登録（PWA対応） -->
    <script>
        // サービスワーカー登録（本番環境でPWA対応）
        if ('serviceWorker' in navigator && window.location.protocol === 'https:') {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>